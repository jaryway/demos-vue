import{g as M}from"./_commonjsHelpers-4gQjN7DL.js";import{l as U}from"./leaflet-irCwxG9g.js";var x={exports:{}};(function(p){(function(a){var t;t=U,p.exports=a(t)})(function(a){return a.Polyline._flat=a.LineUtil.isFlat||a.Polyline._flat||function(t){return!a.Util.isArray(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"},a.GeometryUtil=a.extend(a.GeometryUtil||{},{distance:function(t,e,i){return t.latLngToLayerPoint(e).distanceTo(t.latLngToLayerPoint(i))},distanceSegment:function(t,e,i,n){var o=t.latLngToLayerPoint(e),r=t.latLngToLayerPoint(i),c=t.latLngToLayerPoint(n);return a.LineUtil.pointToSegmentDistance(o,r,c)},readableDistance:function(t,e){var i=e!=="imperial",n;return i?t>1e3?n=(t/1e3).toFixed(2)+" km":n=t.toFixed(1)+" m":(t*=1.09361,t>1760?n=(t/1760).toFixed(2)+" miles":n=t.toFixed(1)+" yd"),n},belongsSegment:function(t,e,i,n){n=n===void 0?.2:n;var o=e.distanceTo(i),r=e.distanceTo(t)+t.distanceTo(i)-o;return r/o<n},length:function(t){var e=a.GeometryUtil.accumulatedLengths(t);return e.length>0?e[e.length-1]:0},accumulatedLengths:function(t){if(typeof t.getLatLngs=="function"&&(t=t.getLatLngs()),t.length===0)return[];for(var e=0,i=[0],n=0,o=t.length-1;n<o;n++)e+=t[n].distanceTo(t[n+1]),i.push(e);return i},closestOnSegment:function(t,e,i,n){var o=t.getMaxZoom();o===1/0&&(o=t.getZoom());var r=t.project(e,o),c=t.project(i,o),s=t.project(n,o),u=a.LineUtil.closestPointOnSegment(r,c,s);return t.unproject(u,o)},closestOnCircle:function(t,e){const i=t.getLatLng(),n=t.getRadius(),o=typeof n=="number"?n:n.radius,r=e.lng,c=e.lat,s=i.lng,u=i.lat,f=r-s,l=c-u,g=Math.sqrt(f*f+l*l),h=s+f/g*o,d=u+l/g*o;return new a.LatLng(d,h)},closest:function(t,e,i,n){var o,r=1/0,c=null,s,u,f,l;if(e instanceof Array)if(e[0]instanceof Array&&typeof e[0][0]!="number"){for(s=0;s<e.length;s++)l=a.GeometryUtil.closest(t,e[s],i,n),l&&l.distance<r&&(r=l.distance,c=l);return c}else if(e[0]instanceof a.LatLng||typeof e[0][0]=="number"||typeof e[0].lat=="number")e=a.polyline(e);else return c;if(!(e instanceof a.Polyline))return c;if(o=JSON.parse(JSON.stringify(e.getLatLngs().slice(0))),e instanceof a.Polygon){var g=function(v){if(a.Polyline._flat(v))v.push(v[0]);else for(var m=0;m<v.length;m++)g(v[m])};g(o)}if(a.Polyline._flat(o)){if(n){for(s=0,u=o.length;s<u;s++){var h=o[s];f=a.GeometryUtil.distance(t,i,h),f<r&&(r=f,c=h,c.distance=f)}return c}for(s=0,u=o.length;s<u-1;s++){var d=o[s],y=o[s+1];f=a.GeometryUtil.distanceSegment(t,i,d,y),f<=r&&(r=f,c=a.GeometryUtil.closestOnSegment(t,i,d,y),c.distance=f)}return c}else{for(s=0;s<o.length;s++)l=a.GeometryUtil.closest(t,o[s],i,n),l.distance<r&&(r=l.distance,c=l);return c}},closestLayer:function(t,e,i){for(var n=1/0,o=null,r=null,c=1/0,s=0,u=e.length;s<u;s++){var f=e[s];if(f instanceof a.LayerGroup){var l=a.GeometryUtil.closestLayer(t,f.getLayers(),i);l.distance<n&&(n=l.distance,o=l)}else f instanceof a.Circle?(r=this.closestOnCircle(f,i),c=a.GeometryUtil.distance(t,i,r)):typeof f.getLatLng=="function"?(r=f.getLatLng(),c=a.GeometryUtil.distance(t,i,r)):(r=a.GeometryUtil.closest(t,f,i),r&&(c=r.distance)),c<n&&(n=c,o={layer:f,latlng:r,distance:c})}return o},nClosestLayers:function(t,e,i,n){if(n=typeof n=="number"?n:e.length,n<1||e.length<1)return null;for(var o=[],r,c,s=0,u=e.length;s<u;s++){var f=e[s];if(f instanceof a.LayerGroup){var l=a.GeometryUtil.closestLayer(t,f.getLayers(),i);o.push(l)}else f instanceof a.Circle?(c=this.closestOnCircle(f,i),r=a.GeometryUtil.distance(t,i,c)):typeof f.getLatLng=="function"?(c=f.getLatLng(),r=a.GeometryUtil.distance(t,i,c)):(c=a.GeometryUtil.closest(t,f,i),c&&(r=c.distance)),o.push({layer:f,latlng:c,distance:r})}return o.sort(function(g,h){return g.distance-h.distance}),o.length>n?o.slice(0,n):o},layersWithin:function(t,e,i,n){n=typeof n=="number"?n:1/0;for(var o=[],r=null,c=0,s=0,u=e.length;s<u;s++){var f=e[s];typeof f.getLatLng=="function"?(r=f.getLatLng(),c=a.GeometryUtil.distance(t,i,r)):(r=a.GeometryUtil.closest(t,f,i),r&&(c=r.distance)),r&&c<n&&o.push({layer:f,latlng:r,distance:c})}var l=o.sort(function(g,h){return g.distance-h.distance});return l},closestLayerSnap:function(t,e,i,n,o){n=typeof n=="number"?n:1/0,o=typeof o=="boolean"?o:!0;var r=a.GeometryUtil.closestLayer(t,e,i);if(!r||r.distance>n)return null;if(o&&typeof r.layer.getLatLngs=="function"){var c=a.GeometryUtil.closest(t,r.layer,r.latlng,!0);c.distance<n&&(r.latlng=c,r.distance=a.GeometryUtil.distance(t,c,i))}return r},interpolateOnPointSegment:function(t,e,i){return a.point(t.x*(1-i)+i*e.x,t.y*(1-i)+i*e.y)},interpolateOnLine:function(t,e,i){e=e instanceof a.Polyline?e.getLatLngs():e;var n=e.length;if(n<2)return null;if(i=Math.max(Math.min(i,1),0),i===0)return{latLng:e[0]instanceof a.LatLng?e[0]:a.latLng(e[0]),predecessor:-1};if(i==1)return{latLng:e[e.length-1]instanceof a.LatLng?e[e.length-1]:a.latLng(e[e.length-1]),predecessor:e.length-2};var o=t.getMaxZoom();o===1/0&&(o=t.getZoom());for(var r=[],c=0,s=0;s<n;s++)r[s]=t.project(e[s],o),s>0&&(c+=r[s-1].distanceTo(r[s]));for(var u=c*i,f=0,l=0,s=0;l<u;s++){var g=r[s],h=r[s+1];f=l,l+=g.distanceTo(h)}if(g==null&&h==null)var g=r[0],h=r[1],s=1;var d=l-f!==0?(u-f)/(l-f):0,y=a.GeometryUtil.interpolateOnPointSegment(g,h,d);return{latLng:t.unproject(y,o),predecessor:s-1}},locateOnLine:function(t,e,i){var n=e.getLatLngs();if(i.equals(n[0]))return 0;if(i.equals(n[n.length-1]))return 1;for(var o=a.GeometryUtil.closest(t,e,i,!1),r=a.GeometryUtil.accumulatedLengths(n),c=r[r.length-1],s=0,u=!1,f=0,l=n.length-1;f<l;f++){var g=n[f],h=n[f+1];if(s=r[f],a.GeometryUtil.belongsSegment(o,g,h,.001)){s+=g.distanceTo(o),u=!0;break}}if(!u)throw"Could not interpolate "+i.toString()+" within "+e.toString();return s/c},reverse:function(t){return a.polyline(t.getLatLngs().slice(0).reverse())},extract:function(t,e,i,n){if(i>n)return a.GeometryUtil.extract(t,a.GeometryUtil.reverse(e),1-i,1-n);i=Math.max(Math.min(i,1),0),n=Math.max(Math.min(n,1),0);var o=e.getLatLngs(),r=a.GeometryUtil.interpolateOnLine(t,e,i),c=a.GeometryUtil.interpolateOnLine(t,e,n);if(i==n){var s=a.GeometryUtil.interpolateOnLine(t,e,n);return[s.latLng]}r.predecessor==-1&&(r.predecessor=0),c.predecessor==-1&&(c.predecessor=0);var u=o.slice(r.predecessor+1,c.predecessor+1);return u.unshift(r.latLng),u.push(c.latLng),u},isBefore:function(t,e){if(!e)return!1;var i=t.getLatLngs(),n=e.getLatLngs();return i[i.length-1].equals(n[0])},isAfter:function(t,e){if(!e)return!1;var i=t.getLatLngs(),n=e.getLatLngs();return i[0].equals(n[n.length-1])},startsAtExtremity:function(t,e){if(!e)return!1;var i=t.getLatLngs(),n=e.getLatLngs(),o=i[0];return o.equals(n[0])||o.equals(n[n.length-1])},computeAngle:function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)*180/Math.PI},computeSlope:function(t,e){var i=(e.y-t.y)/(e.x-t.x),n=t.y-i*t.x;return{a:i,b:n}},rotatePoint:function(t,e,i,n){var o=t.getMaxZoom();o===1/0&&(o=t.getZoom());var r=i*Math.PI/180,c=t.project(e,o),s=t.project(n,o),u=Math.cos(r)*(c.x-s.x)-Math.sin(r)*(c.y-s.y)+s.x,f=Math.sin(r)*(c.x-s.x)+Math.cos(r)*(c.y-s.y)+s.y;return t.unproject(new a.Point(u,f),o)},bearing:function(t,e){var i=Math.PI/180,n=t.lat*i,o=e.lat*i,r=t.lng*i,c=e.lng*i,s=Math.sin(c-r)*Math.cos(o),u=Math.cos(n)*Math.sin(o)-Math.sin(n)*Math.cos(o)*Math.cos(c-r),f=(Math.atan2(s,u)*180/Math.PI+360)%360;return f>=180?f-360:f},destination:function(t,e,i){e=(e+360)%360;var n=Math.PI/180,o=180/Math.PI,r=a.CRS.Earth.R,c=t.lng*n,s=t.lat*n,u=e*n,f=Math.sin(s),l=Math.cos(s),g=Math.cos(i/r),h=Math.sin(i/r),d=Math.asin(f*g+l*h*Math.cos(u)),y=c+Math.atan2(Math.sin(u)*h*l,g-f*Math.sin(d));return y=y*o,y=y>180?y-360:y<-180?y+360:y,a.latLng([d*o,y])},angle:function(t,e,i){var n=t.latLngToContainerPoint(e),o=t.latLngToContainerPoint(i),r=Math.atan2(o.y-n.y,o.x-n.x)*180/Math.PI+90;return r+=r<0?360:0,r},destinationOnSegment:function(t,e,i,n){var o=a.GeometryUtil.angle(t,e,i),r=a.GeometryUtil.destination(e,o,n);return a.GeometryUtil.closestOnSegment(t,r,e,i)}}),a.GeometryUtil})})(x);var G=x.exports;const L=M(G);export{L as G};
